var S=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var m=(n,t,e)=>new Promise((o,r)=>{var c=s=>{try{i(e.next(s))}catch(p){r(p)}},d=s=>{try{i(e.throw(s))}catch(p){r(p)}},i=s=>s.done?o(s.value):Promise.resolve(s.value).then(c,d);i((e=e.apply(n,t)).next())});import{S as b}from"./create-element-if-not-defined-6663e930.js";import{s as L}from"./navigation.min-ce82fda9.js";import{$ as a}from"./jquery-d22529b8.js";import{N as v}from"./navigation-9e008881.js";import"./_commonjsHelpers-187a63f9.js";var T=S(w=>{const q=()=>{a.fn.shuffleLetters=function(t){var e=a.extend({step:8,fps:25,text:"",callback:function(){}},t);return this.each(function(){var o=a(this),r="";e.text?r=e.text.split(""):r=o.text().split("");for(var c=[],d=[],i=0;i<r.length;i++){var s=r[i];if(s==" "){c[i]="space";continue}else/[а-я]/.test(s)?c[i]="lowerLetter":/[А-Я]/.test(s)?c[i]="upperLetter":c[i]="symbol";d.push(i)}o.html(""),function p(f){var u,l=d.length,h=r.slice(0);if(!(f>l)){for(u=Math.max(f,0);u<l;u++)u<f+e.step?h[d[u]]=n(c[d[u]]):h[d[u]]="";o.text(h.join("")),setTimeout(function(){p(f+1)},1e3/e.fps)}}(-e.step)})};function n(t){var e="";t=="lowerLetter"?e="абвгдеёжзийклмнопрстуфхцчшщъыьэюя0123456789":t=="upperLetter"?e="АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ0123456789":t=="symbol"&&(e=`,.?/\\(^)![]{}*&^%$#'"`);var o=e.split("");return o[Math.floor(Math.random()*o.length)]}};function x(n){const t=n[0].getBoundingClientRect(),e=window.innerHeight;return t.bottom>e}const g=a(".shuffle-words");function y(){g.length>0&&g.each(function(){const n=a(this);!n.data("isHandled")&&!x(n)&&(n.addClass("active"),n.shuffleLetters(),n.data("isHandled",!0))}),g.filter(":not([data-isHandled])").length===0&&a(window).off("scroll",y)}a(window).on("scroll",y);const E=()=>{new b(".tactic-gun__slider",{modules:[v],slidesPerView:1,spaceBetween:60,centeredSlides:!0,initialSlide:1,speed:0,loop:!0,breakpoints:{640:{initialSlide:1,centeredSlides:!0,spaceBetween:50},768:{allowTouchMove:!1,initialSlide:1,centeredSlides:!0,spaceBetween:250}},navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}})},M=()=>{new b(".tactic-locations__slider",{modules:[v],slidesPerView:1,speed:300,navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}})},k=()=>{a(window).mousemove(function(n){let t=a(window).width(),e=a(".tactic-night-spotlight").innerWidth(),o=a(".tactic-night-spotlight").innerHeight(),r=n.pageY-a(".tactic-night-spotlight").offset().top,c=n.pageX-a(".tactic-night-spotlight").offset().left;t<768?a(".tactic-night-spotlight").css("background-image","radial-gradient(circle at "+c/e*100+"% "+r/o*100+"%, transparent 80px, rgba(0, 0, 0, 0.8) 100px)"):t<1280?a(".tactic-night-spotlight").css("background-image","radial-gradient(circle at "+c/e*100+"% "+r/o*100+"%, transparent 80px, rgba(0, 0, 0, 0.8) 200px)"):a(".tactic-night-spotlight").css("background-image","radial-gradient(circle at "+c/e*100+"% "+r/o*100+"%, transparent 80px, rgba(0, 0, 0, 0.8) 300px)")})},A=()=>{const n=document.querySelector("body"),t=document.querySelector('[area="avatar-tactic-popupVideo"]'),e=document.querySelector('[area="closeButton"]');let o=document.querySelector(".tactic-play-video");t.querySelectorAll(".tactic-youtube-player");const r=t.querySelector("iframe");o==null||o.addEventListener("click",()=>{t.classList.remove("hidden"),n.classList.add("overflow-hidden"),r==null||r.setAttribute("src","https://www.youtube.com/embed/psi2APf9po4?enablejsapi=1")}),e==null||e.addEventListener("click",()=>{t.classList.add("hidden"),n.classList.remove("overflow-hidden"),document.querySelectorAll("iframe").forEach(function(c){c.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")})})},H=()=>{window.addEventListener("scroll",function(){const t=document.querySelector(".tactic-tariff").offsetTop-60,e=document.querySelector(".tactic-tariff__cost"),o=document.querySelector(".tactic-tariff__content");window.scrollY>=t&&(e.classList.add("active"),o.classList.add("active"))})},_=()=>{const n=document.querySelector(".tactic-subscribe__form"),t=n.querySelector('input[name="name"]'),e=n.querySelector('input[name="phone"]'),o=n.querySelector('input[name="email"]'),r=n.querySelector("#tacticForm-submit"),c=n.querySelector('input[name="csrfmiddlewaretoken"]'),d=t.parentNode.parentNode.querySelector("p"),i=e.parentNode.parentNode.querySelector("p"),s=o.parentNode.parentNode.querySelector("p"),p=document.querySelector("#successMessage");r&&r.addEventListener("click",f=>m(w,null,function*(){f.preventDefault(),f.stopPropagation(),d.setAttribute("aria-hidden","true"),i.setAttribute("aria-hidden","true"),s.setAttribute("aria-hidden","true"),d.innerHTML="no error",i.innerHTML="no error",s.innerHTML="no error";let u={phone:e.value,email:o.value,name:t.value,type:"Заявка на франшизу"};yield fetch("/add_amo_order/",{method:"POST",body:JSON.stringify(u),headers:{"Content-type":"application/json","X-CSRFToken":c.value}}).then(l=>m(w,null,function*(){return{data:yield l.json(),status:l.status}})).then(l=>{if(console.log(l),l.status===200)t.value="",e.value="",o.value="",p.setAttribute("aria-hidden","false"),ym(92197085,"reachGoal","formtactics");else if(l.status===400)l.data.hasOwnProperty("name")&&(d.innerHTML=l.data.name[0],d.setAttribute("aria-hidden","false")),l.data.hasOwnProperty("phone")&&(i.innerHTML=l.data.phone[0],i.setAttribute("aria-hidden","false")),l.data.hasOwnProperty("email")&&(s.innerHTML=l.data.email[0],s.setAttribute("aria-hidden","false"));else throw new Error}).catch(console.error)}))};document.addEventListener("DOMContentLoaded",()=>{L(),q(),E(),M(),k(),A(),H(),_()})});export default T();
